<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RadioImagerGPU: RadioImagerGPU</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RadioImagerGPU<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">RadioImagerGPU</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Description and Overview</h1>
<p>This project, RadioImagerGPU, focuses on developing a GPU-accelerated imager for radio telescope arrays, optimizing the imaging process in arrays with dense UVW sampling. By leveraging the parallel processing capabilities of GPUs, this project aims to enhance the efficiency and performance of radio imaging, potentially simplifying the imaging pipeline and reducing the reliance on complex deconvolution algorithms.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Introduction</h1>
<p>Radio telescopes capture data known as visibilities, which are the Fourier transform of the sky's brightness distribution. Processing this data involves complex calculations that can be computationally intensive, especially for large datasets. Traditional CPU-based methods often struggle with the high computational load, leading to slower processing times.</p>
<p>GPUs, with their ability to perform parallel processing, are well-suited for handling these intensive computations. They can efficiently manage the gridding of visibilities, apply complex weighting schemes, and perform fast Fourier transforms (FFTs). This makes GPUs ideal for enhancing the speed and efficiency of radio imaging processes, allowing for real-time imaging and handling larger datasets with higher precision.</p>
<p>Additionally, the project involves calculating UVW coordinates from XYZ positions of the antennas. The visibility function is calculated using an integral that accounts for the brightness distribution of the sky as a function of celestial coordinates and spatial frequency coordinates.</p>
<p>By optimizing these computations using GPU acceleration, RadioImagerGPU aims to provide a more efficient and scalable solution for radio telescope imaging.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
System Requirements</h1>
<p>To fully utilize the GPU acceleration capabilities, ensure you have a compatible NVIDIA GPU. Below is the hardware and software setup used for developing and testing this project:</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Operating System</h2>
<ul>
<li><b>OS:</b> Ubuntu 22.04.4 LTS (Jammy)</li>
<li><b>Kernel:</b> Linux 6.5.0-28-generic</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
NVIDIA Driver and GPU</h2>
<ul>
<li><b>Driver Version:</b> 550.54.15</li>
<li><b>CUDA Version:</b> 12.4</li>
<li><b>GPUs:</b>: NVIDIA GeForce GTX TITAN X (2 units, 12 GB each)</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
CUDA Toolkit</h2>
<ul>
<li><b>Version:</b> CUDA 12.4</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Python Environment</h2>
<ul>
<li><b>Python Version:</b> 3.10.12</li>
<li>The required Python packages are listed in <code>requirements.txt</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Installation and Building the Project</h2>
<p>Clone the repository and navigate to the project directory:</p>
<div class="fragment"><div class="line">git clone --recurse-submodules https://github.com/nkosogor/RadioImagerGPU.git</div>
<div class="line">cd RadioImagerGPU</div>
<div class="line">pip install -r requirements.txt</div>
</div><!-- fragment --><p> Use CMake to configure and build the project:</p>
<div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md9"></a>
Configuration</h1>
<p>The <code>config.json</code> file is used to configure key parameters for the <code>RadioImager</code> program. This file should be located in the root directory of the repository. The configuration parameters include:</p>
<ul>
<li><code>IMAGE_SIZE</code>: The size of the output image in pixels.</li>
<li><code>PREDEFINE_MAX_UV</code>: The predefined maximum UV distance parameter essentially makes the resolution of the final images predefined and not dependent on the calculated UV coordinates when the corresponding option is enabled.</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
GPU Implementation</h1>
<p>One can run the GPU-accelerated imager from the root of the repository with: </p><div class="fragment"><div class="line">./build/RadioImager [OPTIONS]</div>
</div><!-- fragment --><p> For detailed GPU implementation instructions, please refer to <a class="el" href="md_src_2_r_e_a_d_m_e__doxy.html">GPU Implementation</a>.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
CPU Implementation</h1>
<p>To run the CPU version from the root of the repository, use: </p><div class="fragment"><div class="line">python3 python/imaging_cpu.py [OPTIONS]</div>
</div><!-- fragment --><p> For detailed CPU implementation instructions, please refer to <a class="el" href="md_python_2_r_e_a_d_m_e__doxy.html">CPU Implementation</a>.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Running Tests</h1>
<p>To run the tests and compare images generated by CUDA and Python implementations, execute the following script from the root of the project:</p>
<div class="fragment"><div class="line">python3 tests/compare_images.py</div>
</div><!-- fragment --><p>For detailed information about the tests, refer to <a class="el" href="md_tests_2_r_e_a_d_m_e__doxy.html">Tests for RadioImagerGPU</a>.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Analysis</h1>
<p>The GPU-accelerated RadioImager shows improvements compared to the CPU implementation. Below is an example of a performance comparison with different numbers of arrays (elements) in the case of 10 directions. The plots on the left show a log scale, and on the right, a linear scale. The GPU outperforms the optimized CPU version, which uses vectorized NumPy operations, for different parts of the calculation (UVW, Imaging, and Total times). For a more detailed description of the results, please refer to the <a class="el" href="md_analysis_2_r_e_a_d_m_e__doxy.html">Analysis</a>.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Performance Comparison</h2>
<div class="image">
<img src="performance_comparison_num_directions_10_dark.png" alt=""/>
</div>
    <h1><a class="anchor" id="autotoc_md15"></a>
Documentation</h1>
<p>Apart from the aforementioned READMEs, additional documentation is available in the <code>docs</code> directory as HTML files, which were generated with Doxygen and the Doxyfile. These can be examined either in the <code>docs</code> directory.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Additional Notes</h1>
<p>This is a toy imager that needs to be updated to be used in practical real-world scenarios. Some features that can be added for that include:</p>
<ul>
<li><b>Acceptance of Arbitrary Visibilities</b>: Currently, all visibilities are set to 1, so the final image effectively looks like a PSF. Allowing for arbitrary visibilities would make the imager more versatile.</li>
<li><b>Addition of W-Projection</b>: For wider fields of view or directions where w-terms become significant, adding w-projection would improve image accuracy. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
